<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MongoDB Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .quiz-container {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 600px;
      padding: 20px;
    }

    .quiz-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .quiz-header h1 {
      font-size: 24px;
      margin: 0;
    }

    #question-count {
      font-size: 14px;
      color: #666;
    }

    .quiz-body {
      text-align: left;
    }

    #question-text {
      font-size: 18px;
      margin-bottom: 10px;
    }

    #question-code {
      background-color: #f8f9fa;
      padding: 10px;
      border-radius: 4px;
      font-family: monospace;
      margin-bottom: 20px;
      white-space: pre-wrap;
    }

    #options-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .option-button {
      background-color: #e9ecef;
      border: 1px solid #ced4da;
      border-radius: 4px;
      padding: 10px;
      text-align: left;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .option-button:hover {
      background-color: #dee2e6;
    }

    .option-button.correct {
      background-color: #d4edda;
      border-color: #c3e6cb;
    }

    .option-button.incorrect {
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }

    #feedback {
      margin-top: 20px;
      padding: 10px;
      border-radius: 4px;
    }

    #feedback.correct {
      background-color: #d4edda;
      color: #155724;
    }

    #feedback.incorrect {
      background-color: #f8d7da;
      color: #721c24;
    }

    .hidden {
      display: none;
    }

    #next-button {
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 10px 20px;
      cursor: pointer;
      margin-top: 20px;
      width: 100%;
    }

    #next-button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <div class="quiz-header">
      <h1>MongoDB Quiz</h1>
      <p id="question-count"></p>
    </div>
    <div class="quiz-body">
      <h2 id="question-text"></h2>
      <pre id="question-code"><code></code></pre>
      <div id="options-container">
        <!-- Options will be dynamically inserted here -->
      </div>
      <div id="feedback" class="hidden">
        <p id="feedback-text"></p>
      </div>
      <button id="next-button" class="hidden">Next Question</button>
    </div>
  </div>

  <script>
    // Quiz data
    const questions = [
      {
        question: "Which of the following code snippets groups the documents in the 'employee' collection by both department number and gender, and then calculates the total salary for each combination of department and gender?",
       
        options: [
          'db.employee.aggregate([{$group : {_id :"$dno", gender_id:"$gender",totalSalary: {$sum: "$salary" }}])]',
          'db.employee.aggregate([{$group : {_id :{dno_id: "$dno", gender_id:"$gender"}, totalSalary: {$sum: "$salary" }}])]',
          'db.employee.aggregate([{$group : {dno_id: "$dno", gender_id:"$gender",totalSalary: {$sum: "$salary" }}])]',
          'None of the above'
        ],
        correct: 1,
        explanation: "The correct answer is b) `db.employee.aggregate([{$group : {_id :{dno_id: \"$dno\", gender_id:\"$gender\"}, totalSalary: {$sum: \"$salary\" }}])]`."
      },
      {
        question: "Which code snippet below groups the documents in the 'employee' collection by department number, computes the average salary for each department, and arranges the results in descending order based on department number?",
     
        options: [
          'db.employee.aggregate([{$group:{_id:{$sort:{"_id":-1},averageSalary:{$avg:"$salary"}}}}])',
          'db.employee.aggregate([{$sort:{"$dno":-1}, {$group:{_id:"$dno",averageSalary:{$avg:"$salary"}}}}])',
          'db.employee.aggregate([{$group:{_id:"$dno",averageSalary:{$avg:"$salary"}}},{$sort:{"_id":-1}}])',
          'None of the above'
        ],
        correct: 2,
        explanation: "The correct answer is c) `db.employee.aggregate([{$group:{_id:\"$dno\",averageSalary:{$avg:\"$salary\"}}},{$sort:{\"_id\":-1}}])`."
      },
      {
        question: "Which of the following is a valid MongoDB statement?",
         options: [
          'db.employee.find({\'dno\': 8}, { \'lname\':1,\'salary\':1}).sort({\'salary\':asc})',
          'db.employee.find({ $and:{{\'dno\': 8}},{\'gender\': \'m\'}} },{\' id\':0, \'dno\':1}).limit(30)',
          'db.employee.find({ _id\':{$ltc:14}},{ _id\':0, \'ssn\':1}).limit(4).sort({\'salary\':desc})',
          'None of the above'
        ],
        correct: 3,
        explanation: "The correct answer is d) None of the above."
      },
      {
        question: "Which of the following code groups the documents in the employee collection by department number and calculates the maximum salary of each department?",
         options: [
          'db.employee.aggregate([ {$group : { _id : null, maxSalary: { $max: "$salary" } } ]])',
          'db.employee.aggregate([ {$group : { _id : "$dno", maxSalary: { $max: "$salary" } } ]})',
          'db.employee.aggregate([ {$group : { {$match: {"dno":7} }, maxSalary: { $max: "$salary" } } ]})',
          'None of the above'
        ],
        correct: 1,
        explanation: "The correct answer is b) `db.employee.aggregate([ {$group : { _id : \"$dno\", maxSalary: { $max: \"$salary\" } } ]})`."
      },
      {
        question: "Which of the following is not a valid MongoDB statement?",
        options: [
          'db.sales.insertMany([{\'id\':11,\'item\':\'abc\',\'price\':10,\'quantity\':2,\'date\':new Date(2014-03-01T08:00:00Z))]);',
          'db.people.insertOne({\'id\':2,\'ssn\':12,\'name\':\'Mohamed\',\'age\':\'20\')',
          'db.sales.insertMany([{\'id\':19},{\'item\':\'jkl}],[{price\':5},{\'quantity\':20})];',
          'None of the above'
        ],
        correct: 2,
        explanation: "The correct answer is c) `db.sales.insertMany([{'id':19},{'item':'jkl}],[{price':5},{'quantity':20})];`."
      },
      {
        question: "Which of the following is not a valid MongoDB statement?",
         options: [
          'db.project.deleteOne{join_date:$exists:false}',
          'db.sales.deleteMany{unique:true}',
          'db.project.deleteMany{id\':$not:13}',
          'None of the above'
        ],
        correct: 0,
        explanation: "The correct answer is a) `db.project.deleteOne{join_date:$exists:false}`."
      },
      {
        question: "Which of the following is not a valid MongoDB statement?",
          options: [
          'db.project.createIndex{ pnumber: 1, Pname: -1 } , { name: \'pno_name\' }',
          'db.project.getAllIndexes()',
          'db.department.dropIndex(\'dnumber_1\');',
          'None of the above'
        ],
        correct: 0,
        explanation: "The correct answer is a) `db.project.createIndex{ pnumber: 1, Pname: -1 } , { name: 'pno_name' }`."
      },
      {
        question: "Which of the following code calculates the average salary of employees in department 10?",
        options: [
          'db.employee.aggregate([{$group:{_id:null, averageSalary: { $avg: "Salary"}}}},{$match:{"dno":10} }])',
          'db.employee.aggregate([{$group:{_id:{"dno":7}, averageSalary: { $avg: "Salary"}}}])',
          'db.employee.aggregate([{$match:{"dno":10} },{$group:{_id:null, averageSalary: { $avg: "Salary"}}}])',
          'None of the above'
        ],
        correct: 2,
        explanation: "The correct answer is c) `db.employee.aggregate([{$match:{\"dno\":10} },{$group:{_id:null, averageSalary: { $avg: \"Salary\"}}}])`."
      },
      {
        question: "Which of the following is not a valid MongoDB statement?",
        options: [
          'db.sales.updateMany ( {$or: [{_id\':{$gte:14, $lte:16}},{price:7.5}]}, { $set : {join_date : "} } )',
          'db.sales.updateMany ( { \'_id\':{$gte:14, $lte:16} }, { $unset : {join_date : new Date()} }',
          'db.sales.updateMany ( { \'join_date\':{$exists:True}}, {$set : {start_date: new Date()}}',
          'None of the above'
        ],
        correct: 1,
        explanation: "The correct answer is b) `db.sales.updateMany ( { '_id':{$gte:14, $lte:16} }, { $unset : {join_date : new Date()} }`."
      },
      {
        question: "Which of the following is a valid MongoDB statement?",
        options: [
          'db.employee.insertOne([ \'ssn\': \'1234\', \'fname\': \'AH\',\'dno\':\'20\']);',
          'db.employee.insertOne({ ssn: 1234,fname: AH, dno: 20});',
          'db.employee.insertMany({\'ssn\': \'1234\', \'fname\': \'AH\',\'dno\': 10});',
          'None of the above'
        ],
        correct: 3,
        explanation: "The correct answer is d) None of the above."
      }
    ];

    let currentQuestion = 0;
    let score = 0;

    // DOM elements
    const questionCountElement = document.getElementById('question-count');
    const questionTextElement = document.getElementById('question-text');
    const questionCodeElement = document.getElementById('question-code');
    const optionsContainer = document.getElementById('options-container');
    const feedbackElement = document.getElementById('feedback');
    const feedbackTextElement = document.getElementById('feedback-text');
    const nextButton = document.getElementById('next-button');

    // Load a question into the UI
    function loadQuestion() {
      const question = questions[currentQuestion];
      questionCountElement.textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
      questionTextElement.textContent = question.question;
      questionCodeElement.textContent = question.code;

      // Clear previous options
      optionsContainer.innerHTML = '';

      // Add new options
      question.options.forEach((option, index) => {
        const button = document.createElement('button');
        button.classList.add('option-button');
        button.textContent = option;
        button.addEventListener('click', () => checkAnswer(index));
        optionsContainer.appendChild(button);
      });

      // Reset feedback and next button
      feedbackElement.classList.add('hidden');
      feedbackElement.classList.remove('correct', 'incorrect');
      nextButton.classList.add('hidden');
    }

    // Check if the selected answer is correct
    function checkAnswer(selectedIndex) {
      const question = questions[currentQuestion];
      const optionButtons = document.querySelectorAll('.option-button');

      // Disable all buttons after selection
      optionButtons.forEach((button) => {
        button.disabled = true;
      });

      // Highlight correct and incorrect answers
      optionButtons.forEach((button, index) => {
        if (index === question.correct) {
          button.classList.add('correct');
        } else if (index === selectedIndex) {
          button.classList.add('incorrect');
        }
      });

      // Show feedback
      feedbackElement.classList.remove('hidden');
      if (selectedIndex === question.correct) {
        feedbackElement.classList.add('correct');
        feedbackElement.classList.remove('incorrect');
        feedbackTextElement.textContent = `Correct! ${question.explanation}`;
        score++;
      } else {
        feedbackElement.classList.add('incorrect');
        feedbackElement.classList.remove('correct');
        feedbackTextElement.textContent = `Incorrect. ${question.explanation}`;
      }

      // Show next button
      nextButton.classList.remove('hidden');
    }

    // Move to the next question or end the quiz
    nextButton.addEventListener('click', () => {
      currentQuestion++;
      if (currentQuestion < questions.length) {
        loadQuestion();
      } else {
        // Quiz is complete
        alert(`Quiz complete! Your score is ${score}/${questions.length}.`);
        currentQuestion = 0;
        score = 0;
        loadQuestion();
      }
    });

    // Load the first question when the page loads
    loadQuestion();
  </script>
</body>
</html>
